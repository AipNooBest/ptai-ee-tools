spring:
  profiles:
    active: prod

  main:
    lazy-initialization: false

  # Database connection settings
  datasource:
    url: jdbc:h2:./db/ptai
    # url: jdbc:h2:tcp://localhost/./ptai
    username: sa
    password: P@ssw0rd
    driver-class-name: org.h2.Driver
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate.ddl-auto: validate
  liquibase:
    change-log: classpath:/db/changelog/changelog-master.xml
    enabled: true
  h2:
    console:
      enabled: false

# Logging settings
logging:
  level:
    root: INFO
    org.springframework.security: INFO
    org.springframework.cloud.consul: ERROR
    com.ptsecurity.appsec.ai.ee.utils.ci.integration.service: DEBUG

# Spring Boot Actuator endpoints
endpoints:
  health.sensitive: false
  info.sensitive: false
  metrics.sensitive: false
management:
  endpoints:
    enabled-by-default: false
  endpoint:
    health.enabled: true
  security:
    enabled: false

# Enable SSL
security:
  require-ssl: true
server:
  error:
    include-stacktrace: never
  ssl:
    # SSL settings for integration service HTTPS access
    key-store-type: JKS
    key-store: classpath:keystore/keystore.jks
    key-store-password: P@ssw0rd
    key-alias: domain.org ptai integration server (alzhukov-pc.ptsecurity.ru)
    key-password: 1q2w3e4r
    trust-store-type: JKS
    trust-store: classpath:keystore/keystore.jks
    trust-store-password: P@ssw0rd
  port: 8443

# PT AI backend services settings
ptai-backend-services:
  # Backend services settings
  #
  # Location of embedded CI server
  ci-url: https://ptaisrv.domain.org:8443/jenkins
  # User name and access token for embedded CI server
  ci-user-name: svc_ptai
  # api-token: 114b330974dba8827019a5988ed461f8af
  ci-api-token: 1129623a36aca55eed653fdbff8a1ea01b
  ci-job-name: SAST/UI-managed SAST pipeline v2
  # As Jenkins connection may be unstable due to its load, sometimes there's need for retries
  ci-max-retry: 5
  ci-retry-delay: 5000

  # SSL client key to authenticate on PTAI server
  ptai-key-alias: ptai ssl client certificate
  ptai-key-password: 1q2w3e4r
  # URL of PTAI server gateway.
  ptai-url: https://ptaisrv.domain.org:443

ptai-integration-service:
  # Certificate alias to use to check JWT
  check-cert-alias: domain.org ptai authorization server (alzhukov-pc.ptsecurity.ru)

# There is embedded authorization server that uses the same keystore as server.ssl.key-store
ptai-authorization-server:
  # User name that is created in the authorization server DB
  admin-name: admin
  # Key alias to use to sign JWT
  sign-key-alias: domain.org ptai authorization server (alzhukov-pc.ptsecurity.ru)
  sign-key-password: 1q2w3e4r
